<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Lâ€™Avent magique de lâ€™EDM</title>
<style>
  :root{--red:#a41616;--cream:#fff2db;--white:#ffffff;}
  body{
    margin:0;
    font-family: "Segoe UI", Roboto, Arial, sans-serif;
    background: linear-gradient(#f5f7fa,#eef6f9);
    color: #222;
    text-align:center;
  }
  h1{color:var(--red); margin:24px 0; font-size:2rem;}
  #calendar{
    max-width:980px;
    margin:0 auto 24px;
    display:grid;
    grid-template-columns:repeat(6,1fr);
    gap:12px;
    padding:0 12px;
    z-index:2;
    position:relative;
  }

  /* card container */
  .door{
    position:relative;
    height:120px;
    border-radius:10px;
    perspective:900px;
    cursor:pointer;
    transform-style:preserve-3d;
  }

  /* two faces */
  .face{
    position:absolute;
    inset:0;
    border-radius:10px;
    backface-visibility:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    padding:8px;
    box-sizing:border-box;
    transition: transform .6s ease, box-shadow .3s ease;
  }

  .face.front{
    background:var(--red);
    color:var(--white);
    transform:rotateY(0deg);
    font-weight:700;
    font-size:1.4rem;
  }

  .face.back{
    background:var(--cream);
    color:var(--red);
    transform:rotateY(180deg); /* hidden until card flips */
    text-align:center;
    font-size:0.95rem;
    line-height:1.2;
    padding:12px;
  }

  /* open state rotates whole .door so back faces front */
  .door.open{
    transform: rotateY(180deg);
    box-shadow:0 8px 24px rgba(0,0,0,0.12);
    animation: sparkle 1.6s infinite;
  }

  /* ensure text stays readable (not inverted) */
  .door.open .face.front { transform: rotateY(180deg); }
  .door.open .face.back  { transform: rotateY(0deg); }

  /* hover */
  .door:hover .face.front{ box-shadow:0 6px 20px rgba(0,0,0,0.12); transform: scale(1.02); }

  @keyframes sparkle{
    0%{ box-shadow: 0 0 6px 2px rgba(255,215,0,0.6); }
    50%{ box-shadow: 0 0 18px 6px rgba(255,215,0,0.85); }
    100%{ box-shadow: 0 0 6px 2px rgba(255,215,0,0.6); }
  }

  /* responsive */
  @media (max-width:800px){
    #calendar{grid-template-columns:repeat(4,1fr);}
    .door{height:100px;}
  }
  @media (max-width:420px){
    #calendar{grid-template-columns:repeat(3,1fr); gap:8px;}
    .door{height:88px;}
  }

  /* canvas (snow) under everything */
  canvas.snow{ position:fixed; left:0; top:0; width:100%; height:100%; pointer-events:none; z-index:0; }
  /* keep content above */
  header, #calendar { position:relative; z-index:2; }
  footer{ color:#666; margin-bottom:20px; }
</style>
</head>
<body>
<header>
  <h1>ðŸŽ„ Lâ€™Avent magique de lâ€™EDM</h1>
</header>

<div id="calendar" aria-live="polite"></div>
<footer id="page-footer">Calendrier de lâ€™Avent â€” EDM</footer>

<audio id="bgmusic" loop>
  <source src="https://cdn.pixabay.com/audio/2022/11/25/audio_6f3165f278.mp3" type="audio/mpeg">
</audio>

<canvas class="snow"></canvas>

<script>
/* ---------- Configuration de test ---------- */
const MODE_TEST = true;     // true = toutes les cases ouvrables pour tester
const TEST_DAY = 24;        // jour simulÃ© (inutile si MODE_TEST true mais prÃ©sent)
const ADMIN_KEY = "edm2024"; // clÃ© admin (toujours active)

/* ---------- DonnÃ©es (noms & messages) ---------- */
const noms = [
  "Annie-Claude","Anne-Laure","Brigitte","Denise","Elise","Emmanuelle",
  "Fatima","Guillemette","Julie","Karima","Laure","LoÃ¯c",
  "Marc","Michelle","Murielle","Nathalie","Nicole","Pascale",
  "Roxane","Sidonie","Sylvie","ValÃ©rie","EDM"
];
const messages = [
  "Laisse ton Ã©nergie positive briller autour de toi",
  "Envoie un message positif sur le Teams de lâ€™Ã©quipe",
  "Chapeau ! Pour la maniÃ¨re dont tu as abordÃ© cette mission complexe quâ€™est le CPF",
  "Pause bien-Ãªtre â€“ Ã©tire-toi, respire, profite du moment",
  "Tu inspires confiance par ton attitude posÃ©e et professionnelle",
  "Ton expertise est prÃ©cieuse et ta collaboration Ã©galement",
  "Aujourdâ€™hui, je te souhaite un sourire qui dure toute la journÃ©e",
  "Ton super pouvoir du jour, faire rire quelquâ€™un",
  "Laisse un post-it positif sur un Ã©cran",
  "Prends soin de toi aujourdâ€™hui ðŸŽ…",
  "Nous te remercions sincÃ¨rement pour ta collaboration",
  "Bienvenue Ã  lâ€™Ã©cole des mÃ©tiers",
  "Ton sens de lâ€™analyse est un vrai atout pour notre Ã©quipe",
  "Tu fais preuve dâ€™une belle curiositÃ© intellectuelle",
  "Tu es toujours prÃªte Ã  donner un coup de main Ã  tes collÃ¨gues",
  "Tu es toujours attentive aux autres. Merci pour ta bienveillance",
  "Tu ne tâ€™ennuies jamais",
  "Gardez le sourire, le meilleur reste Ã  venir",
  "Dis-nous 3 choses qui rendent heureuse",
  "Tes efforts dâ€™aujourdâ€™hui sont les rÃ©ussites de demain",
  "Merci pour lâ€™Ã©nergie et le bien-Ãªtre que tu transmets aux agents",
  "Ta capacitÃ© Ã  rÃ©soudre des problÃ¨mes complexes est admirable",
  "EDM : Joyeux NoÃ«l Ã  toute lâ€™Ã©quipe. Merci pour votre solidaritÃ© ðŸŽ„"
];

/* ---------- Date (mode test fiable) ---------- */
let today;
if (MODE_TEST) {
  // crÃ©e une date de dÃ©cembre fiable (annÃ©e courante)
  const year = new Date().getFullYear();
  today = new Date(year, 11, TEST_DAY); // 11 = dÃ©cembre
} else {
  today = new Date();
}
const currentMonth = today.getMonth(); // 11 = dÃ©cembre
const currentDay = today.getDate();

/* ---------- Snow canvas ---------- */
const canvas = document.querySelector('canvas.snow');
const ctx = canvas.getContext('2d');
function resize() { canvas.width = innerWidth; canvas.height = innerHeight; }
window.addEventListener('resize', resize);
resize();

let flakes = [];
let baseCount = 90;
function createFlakes(n){
  flakes = Array.from({length:n}, ()=>({ x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*3+0.8, d:Math.random()+0.3 }));
}
createFlakes(baseCount);

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle='white'; ctx.beginPath();
  for(const f of flakes){ ctx.moveTo(f.x,f.y); ctx.arc(f.x,f.y,f.r,0,Math.PI*2); }
  ctx.fill();
  for(const f of flakes){ f.y += Math.pow(f.d,2)+0.6; if(f.y>canvas.height){ f.y=-10; f.x=Math.random()*canvas.width; } }
  requestAnimationFrame(draw);
}
draw();

/* ---------- GÃ©nÃ©ration du calendrier ---------- */
const cal = document.getElementById('calendar');
const N = Math.min(noms.length, messages.length);

for(let i=0;i<N;i++){
  const day = i+1;
  const door = document.createElement('div');
  door.className = 'door';

  const front = document.createElement('div');
  front.className = 'face front';
  front.innerHTML = `<div style="font-size:1rem;">${noms[i] || ''}</div><div style="position:absolute;top:8px;left:10px;font-weight:800">${day}</div>`;

  const back = document.createElement('div');
  back.className = 'face back';
  back.textContent = messages[i] || '';

  door.appendChild(front);
  door.appendChild(back);

  // comportement selon date
  if (MODE_TEST || currentMonth > 10 || day <= currentDay) {
    // allow opening for test OR if in december OR past/current days
    door.addEventListener('click', () => {
      // if future in december block
      if (!MODE_TEST && currentMonth === 11 && day > currentDay) {
        alert("ðŸŽ Patience ! Ce n'est pas encore ton jour.");
        return;
      }
      // ask for name or admin
      const input = prompt("ðŸ” Entrez votre prÃ©nom (ou clÃ© admin) :");
      if (!input) return;
      const v = input.trim().toLowerCase();
      const nameOk = (noms[i] || '').toLowerCase() === v;
      const adminOk = v === ADMIN_KEY.toLowerCase();
      if (!nameOk && !adminOk) {
        alert("â›” DÃ©solÃ©, cette case ne tâ€™est pas destinÃ©e !");
        return;
      }
      // open or show message
      if (!door.classList.contains('open')) {
        door.classList.add('open');
        // intensify snow briefly
        createFlakes(baseCount*2);
        setTimeout(()=>createFlakes(baseCount), 3000);
      } else {
        door.classList.remove('open');
      }
    });
  } else {
    // before december: block everything
    door.addEventListener('click',()=> alert("ðŸŽ Patience ! Le calendrier dÃ©bute le 1er dÃ©cembre."));
  }

  cal.appendChild(door);
}

/* ---------- Music helper ---------- */
document.addEventListener('DOMContentLoaded', ()=>{
  const audio = document.getElementById('bgmusic');
  audio.play().catch(()=> {
    const btn = document.createElement('button');
    btn.textContent = 'â–¶ Lancer la musique';
    Object.assign(btn.style,{position:'fixed',top:'10px',right:'10px',zIndex:5,padding:'8px 10px',background:'#a41616',color:'#fff',border:'none',borderRadius:'6px',cursor:'pointer'});
    btn.onclick = ()=> { audio.play(); btn.remove(); };
    document.body.appendChild(btn);
  });
});
</script>
</body>
</html>

  
  



 
